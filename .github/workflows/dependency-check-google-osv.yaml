name: dependency-check-google-osv

on:
  push:
    paths: &shared-trigger-paths
      - 'package.json'
      - 'package-lock.json'
      - 'ios/**'
      - 'android/**'
      - '**/*.gradle'
      - '**/Podfile*'
      - '**/Package*.swift'
      - '.github/dependency-check-google-osv.yaml'
    branches:
      - main
      - develop
      - 'releases/**'
  pull_request:
    types: [ opened, synchronize ]
    paths: *shared-trigger-paths
  workflow_dispatch:

permissions:
  actions: read
  security-events: write
  contents: read

jobs:
  depcheck:
    uses: "google/osv-scanner-action/.github/workflows/osv-scanner-reusable.yml@v2.2.2"
    with:
      scan-args: |-
        --recursive
        ./
